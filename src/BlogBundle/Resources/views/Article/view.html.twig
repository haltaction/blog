{% extends "BlogBundle::base.html.twig" %}

{% block title %}Article:view{% endblock %}

{% block content %}
    <h1>{{ article.title }}</h1>
    <div class="row panel panel-default">
        <div class="panel-heading">
            <span>{{ article.createdAt|date("d.m.Y") }}</span>
        </div>
        <div class="panel-body">{{ article.content|raw }}</div>
        {% if (article.tags) %}
            <div class="panel-footer">
            {% for tag in article.tags|keys  %}
                {# todo links on search by #}
                <span class="label label-info"><a href="#">{{ tag }}</a></span>
            {% endfor %}
            </div>
        {% endif %}
    </div>
    <div class="row">
        {% block comment_form %}
            {% if is_granted('IS_AUTHENTICATED_FULLY') and commentForm is not defined %}
                {{ render(controller('BlogBundle:Comment:commentForm', {'article': article })) }}
            {% endif %}
        {% endblock %}
    </div>

    <div class="row">
        {% block comment_list %}
            {% if article.comments is not empty %}
                {% for comment in article.comments %}
                    <ul class="list-group">
                    {% include('BlogBundle:Comment:list_li.html.twig') %}
                    </ul>
                {% endfor %}
            {% else %}
                <span>No comments</span>
            {% endif %}
        {% endblock %}
    </div>
{% endblock %}
