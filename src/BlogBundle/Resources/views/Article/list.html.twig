{% extends "BlogBundle::base.html.twig" %}

{% block title %}Article:list{% endblock %}

{% block content %}
<h1>Список статтей</h1>
    Статьи отсортированы: По новизне / По количеству просмотров todo

    {% for article in articles %}
        {# todo link to post without "edit", just for view. Link to edit show only for admin in different place #}
        <li class="list-unstyled">
            {#<a href="/article/{{ article.slug }}">#}
                <h3>{{ article.title|title }}</h3>
            {#</a>#}
            {# todo create filter for slice first 2 sentence #}
            <div class="well">{{ article.content|striptags|replace({'&nbsp;': " "})|sentencesLimit(2) }}</div>
            {% if is_granted("ROLE_ADMIN") %}
                <div class="bs-callout bs-callout-warning admin-links">
                    <a href="{{ path('blog_edit_article', {'slug': article.slug}) }}" class="btn btn-info btn-xs">Edit</a>
                    <a href="{{ path('blog_delete_article', {'slug': article.slug}) }}" class="pull-right btn btn-danger btn-xs" onclick="return confirm('Are you sure?')" >Delete</a>
                </div>
            {% endif %}
        </li>

    {% endfor %}

{% endblock %}

{% block javascripts %}
    {{ parent() }}
{% endblock %}